<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>METplus: metplus.util.string_template_substitution Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">METplus
   &#160;<span id="projectnumber">METplusV3.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>metplus</b></li><li class="navelem"><b>util</b></li><li class="navelem"><a class="el" href="namespacemetplus_1_1util_1_1string__template__substitution.html">string_template_substitution</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">metplus.util.string_template_substitution Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Program Name: string_template_substitution.py
Contact(s): Julie Prestopnik, NCAR RAL DTC, jpresto@ucar.edu, George McCabe
Abstract: Supporting functions for parsing and creating filename templates
History Log:  Initial version for METPlus
Usage: Usually imported in other Python code for individual function calls
Parameters: Varies
Input Files: None
Output Files: None
Condition codes: Varies</pre> </div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab64dbb4f3a90e98d3f6c812209e1b1a9"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemetplus_1_1util_1_1string__template__substitution.html#ab64dbb4f3a90e98d3f6c812209e1b1a9">multiple_replace</a> (replace_dict, text)</td></tr>
<tr class="separator:ab64dbb4f3a90e98d3f6c812209e1b1a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a380f79d206a4d803a3420de0e09d4623"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemetplus_1_1util_1_1string__template__substitution.html#a380f79d206a4d803a3420de0e09d4623">get_tags</a> (template)</td></tr>
<tr class="memdesc:a380f79d206a4d803a3420de0e09d4623"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse template and pull out all wildcard characters (* or ?) and all tags, i.e.  <a href="#a380f79d206a4d803a3420de0e09d4623">More...</a><br /></td></tr>
<tr class="separator:a380f79d206a4d803a3420de0e09d4623"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14e344b8582d02210d4b0785c3fb54db"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemetplus_1_1util_1_1string__template__substitution.html#a14e344b8582d02210d4b0785c3fb54db">format_one_time_item</a> (item, time_str, unit)</td></tr>
<tr class="memdesc:a14e344b8582d02210d4b0785c3fb54db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function for do_string_sub.  <a href="#a14e344b8582d02210d4b0785c3fb54db">More...</a><br /></td></tr>
<tr class="separator:a14e344b8582d02210d4b0785c3fb54db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0ef3ba7de100a846a331c998abe843f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemetplus_1_1util_1_1string__template__substitution.html#ac0ef3ba7de100a846a331c998abe843f">format_hms</a> (fmt, obj)</td></tr>
<tr class="memdesc:ac0ef3ba7de100a846a331c998abe843f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function for do_string_sub.  <a href="#ac0ef3ba7de100a846a331c998abe843f">More...</a><br /></td></tr>
<tr class="separator:ac0ef3ba7de100a846a331c998abe843f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a850f6562c5ab7ac0b59a51cb90c0b513"><td class="memItemLeft" align="right" valign="top"><a id="a850f6562c5ab7ac0b59a51cb90c0b513"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemetplus_1_1util_1_1string__template__substitution.html#a850f6562c5ab7ac0b59a51cb90c0b513">set_output_dict_from_time_info</a> (time_dict, output_dict, key)</td></tr>
<tr class="memdesc:a850f6562c5ab7ac0b59a51cb90c0b513"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create datetime object from time data, get month and day from julian date if applicable. <br /></td></tr>
<tr class="separator:a850f6562c5ab7ac0b59a51cb90c0b513"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f744b36edb54fddcece168ce15dd6b3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemetplus_1_1util_1_1string__template__substitution.html#a6f744b36edb54fddcece168ce15dd6b3">add_to_dict</a> (match, match_dict, filepath, new_len)</td></tr>
<tr class="memdesc:a6f744b36edb54fddcece168ce15dd6b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add extracted information to match dictionary Args:  <a href="#a6f744b36edb54fddcece168ce15dd6b3">More...</a><br /></td></tr>
<tr class="separator:a6f744b36edb54fddcece168ce15dd6b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33354321db9120f70bfc9e0e50ab524a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemetplus_1_1util_1_1string__template__substitution.html#a33354321db9120f70bfc9e0e50ab524a">get_seconds_from_template</a> (split_string, element_name, kwargs)</td></tr>
<tr class="memdesc:a33354321db9120f70bfc9e0e50ab524a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get seconds value from tag that contains a shift or truncate item Args:  <a href="#a33354321db9120f70bfc9e0e50ab524a">More...</a><br /></td></tr>
<tr class="separator:a33354321db9120f70bfc9e0e50ab524a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab495c65288500b6c0b3fbb951151bd43"><td class="memItemLeft" align="right" valign="top"><a id="ab495c65288500b6c0b3fbb951151bd43"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemetplus_1_1util_1_1string__template__substitution.html#ab495c65288500b6c0b3fbb951151bd43">round_time_down</a> (obj, truncate_seconds)</td></tr>
<tr class="memdesc:ab495c65288500b6c0b3fbb951151bd43"><td class="mdescLeft">&#160;</td><td class="mdescRight">If template value needs to be truncated, round the value down to the given truncate interval. <br /></td></tr>
<tr class="separator:ab495c65288500b6c0b3fbb951151bd43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a231bebe9a5e50516dd0c01b3b3b3bab4"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemetplus_1_1util_1_1string__template__substitution.html#a231bebe9a5e50516dd0c01b3b3b3bab4">handle_format_delimiter</a> (split_string, idx, shift_seconds, truncate_seconds, kwargs)</td></tr>
<tr class="memdesc:a231bebe9a5e50516dd0c01b3b3b3bab4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for formatting/length request by splitting on FORMATTING_VALUE_DELIMITER split_string[1] Args:  <a href="#a231bebe9a5e50516dd0c01b3b3b3bab4">More...</a><br /></td></tr>
<tr class="separator:a231bebe9a5e50516dd0c01b3b3b3bab4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45de5cb0b5e343ae8b55bdc72667d37f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemetplus_1_1util_1_1string__template__substitution.html#a45de5cb0b5e343ae8b55bdc72667d37f">do_string_sub</a> (tmpl, skip_missing_tags=False, recurse=False, attempt=MAX_ATTEMPTS, kwargs)</td></tr>
<tr class="separator:a45de5cb0b5e343ae8b55bdc72667d37f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc346064a278283a0ee42f2617ed51d8"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemetplus_1_1util_1_1string__template__substitution.html#adc346064a278283a0ee42f2617ed51d8">find_and_replace_tags_in_template</a> (match_list, tmpl, kwargs, skip_missing_tags=False)</td></tr>
<tr class="memdesc:adc346064a278283a0ee42f2617ed51d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loop through tags from template and replace them with the correct time values.  <a href="#adc346064a278283a0ee42f2617ed51d8">More...</a><br /></td></tr>
<tr class="separator:adc346064a278283a0ee42f2617ed51d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab633116159fb4e2930a75cdda1f36c0e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemetplus_1_1util_1_1string__template__substitution.html#ab633116159fb4e2930a75cdda1f36c0e">parse_template</a> (template, filepath, logger=None)</td></tr>
<tr class="memdesc:ab633116159fb4e2930a75cdda1f36c0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract time information from path using the filename template Args:  <a href="#ab633116159fb4e2930a75cdda1f36c0e">More...</a><br /></td></tr>
<tr class="separator:ab633116159fb4e2930a75cdda1f36c0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeba014d23aae7ba688e5a71f6f30e3b6"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemetplus_1_1util_1_1string__template__substitution.html#aeba014d23aae7ba688e5a71f6f30e3b6">populate_match_dict</a> (template, filepath, logger=None)</td></tr>
<tr class="memdesc:aeba014d23aae7ba688e5a71f6f30e3b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use template to extract time information from filepath, add each value to a dictionary.  <a href="#aeba014d23aae7ba688e5a71f6f30e3b6">More...</a><br /></td></tr>
<tr class="separator:aeba014d23aae7ba688e5a71f6f30e3b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34dee4ea44f62db339e723d799db92af"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemetplus_1_1util_1_1string__template__substitution.html#a34dee4ea44f62db339e723d799db92af">process_match_tags</a> (all_tags, filepath, logger)</td></tr>
<tr class="memdesc:a34dee4ea44f62db339e723d799db92af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loop through tags and process each.  <a href="#a34dee4ea44f62db339e723d799db92af">More...</a><br /></td></tr>
<tr class="separator:a34dee4ea44f62db339e723d799db92af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96e4fe20561296eda4db76441d55c107"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemetplus_1_1util_1_1string__template__substitution.html#a96e4fe20561296eda4db76441d55c107">check_pre_text</a> (filepath, pre_text, logger=None)</td></tr>
<tr class="memdesc:a96e4fe20561296eda4db76441d55c107"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if there is an text before all tags and if they match the template.  <a href="#a96e4fe20561296eda4db76441d55c107">More...</a><br /></td></tr>
<tr class="separator:a96e4fe20561296eda4db76441d55c107"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78c0f21c3892faca71b2df2c04d2249d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemetplus_1_1util_1_1string__template__substitution.html#a78c0f21c3892faca71b2df2c04d2249d">check_post_text</a> (filepath, post_text, logger=None)</td></tr>
<tr class="memdesc:a78c0f21c3892faca71b2df2c04d2249d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if there is an text after all tags and if they match the template.  <a href="#a78c0f21c3892faca71b2df2c04d2249d">More...</a><br /></td></tr>
<tr class="separator:a78c0f21c3892faca71b2df2c04d2249d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a550047d109ae90f315134d50cc9cca84"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemetplus_1_1util_1_1string__template__substitution.html#a550047d109ae90f315134d50cc9cca84">get_format_and_shift</a> (tag_content, filepath, match_dict, valid_shift, extra_text)</td></tr>
<tr class="memdesc:a550047d109ae90f315134d50cc9cca84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract format and shift information from tag.  <a href="#a550047d109ae90f315134d50cc9cca84">More...</a><br /></td></tr>
<tr class="separator:a550047d109ae90f315134d50cc9cca84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd5fff14199a70b0025a04c7d0da73c5"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemetplus_1_1util_1_1string__template__substitution.html#acd5fff14199a70b0025a04c7d0da73c5">get_fmt_info</a> (fmt, filepath, match_dict, identifier)</td></tr>
<tr class="memdesc:acd5fff14199a70b0025a04c7d0da73c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function for parse_template.  <a href="#acd5fff14199a70b0025a04c7d0da73c5">More...</a><br /></td></tr>
<tr class="separator:acd5fff14199a70b0025a04c7d0da73c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6e19849f8996439782251d9d2afb325"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemetplus_1_1util_1_1string__template__substitution.html#aa6e19849f8996439782251d9d2afb325">populate_output_dict</a> (match_dict, valid_shift)</td></tr>
<tr class="memdesc:aa6e19849f8996439782251d9d2afb325"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get all time values in match dictionary to add to the output dictionary Args:  <a href="#aa6e19849f8996439782251d9d2afb325">More...</a><br /></td></tr>
<tr class="separator:aa6e19849f8996439782251d9d2afb325"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae41673294599268f3f42d7762e18f90c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemetplus_1_1util_1_1string__template__substitution.html#ae41673294599268f3f42d7762e18f90c">add_date_matches_to_output_dict</a> (match_dict, output_dict, time_type, valid_shift=0)</td></tr>
<tr class="memdesc:ae41673294599268f3f42d7762e18f90c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Look for time values in match dictionary add combine the values to add to the output dictionary.  <a href="#ae41673294599268f3f42d7762e18f90c">More...</a><br /></td></tr>
<tr class="separator:ae41673294599268f3f42d7762e18f90c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20a315b1c804b2c7fc57c6f60f3a619e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemetplus_1_1util_1_1string__template__substitution.html#a20a315b1c804b2c7fc57c6f60f3a619e">add_lead_matches_to_output_dict</a> (match_dict, output_dict)</td></tr>
<tr class="memdesc:a20a315b1c804b2c7fc57c6f60f3a619e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Look for forecast lead values in match dictionary add combine the values to add to the output dictionary Args:  <a href="#a20a315b1c804b2c7fc57c6f60f3a619e">More...</a><br /></td></tr>
<tr class="separator:a20a315b1c804b2c7fc57c6f60f3a619e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1090b938934069306e30af35186dd7f0"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemetplus_1_1util_1_1string__template__substitution.html#a1090b938934069306e30af35186dd7f0">add_offset_matches_to_output_dict</a> (match_dict, output_dict)</td></tr>
<tr class="memdesc:a1090b938934069306e30af35186dd7f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Look for offset value in match dictionary and add the value to the output dictionary Args:  <a href="#a1090b938934069306e30af35186dd7f0">More...</a><br /></td></tr>
<tr class="separator:a1090b938934069306e30af35186dd7f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11ebf82b66d0800225bf620a9437f806"><td class="memItemLeft" align="right" valign="top"><a id="a11ebf82b66d0800225bf620a9437f806"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>extract_lead</b> (template, filename)</td></tr>
<tr class="separator:a11ebf82b66d0800225bf620a9437f806"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a7049b98fe40350fd59cbc92a46b74c82"><td class="memItemLeft" align="right" valign="top"><a id="a7049b98fe40350fd59cbc92a46b74c82"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>TEMPLATE_IDENTIFIER_BEGIN</b> = &quot;{&quot;</td></tr>
<tr class="separator:a7049b98fe40350fd59cbc92a46b74c82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a184f52e65756e555cd2d42ce95cf0143"><td class="memItemLeft" align="right" valign="top"><a id="a184f52e65756e555cd2d42ce95cf0143"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>TEMPLATE_IDENTIFIER_END</b> = &quot;}&quot;</td></tr>
<tr class="separator:a184f52e65756e555cd2d42ce95cf0143"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaffe054b59ff00dad4903b0a8139787c"><td class="memItemLeft" align="right" valign="top"><a id="aaffe054b59ff00dad4903b0a8139787c"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>FORMATTING_DELIMITER</b> = &quot;?&quot;</td></tr>
<tr class="separator:aaffe054b59ff00dad4903b0a8139787c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4825ec9ad5ab434018a982be59293171"><td class="memItemLeft" align="right" valign="top"><a id="a4825ec9ad5ab434018a982be59293171"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>FORMATTING_VALUE_DELIMITER</b> = &quot;=&quot;</td></tr>
<tr class="separator:a4825ec9ad5ab434018a982be59293171"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5516b7058e34c99bb862df3bc1eecae3"><td class="memItemLeft" align="right" valign="top"><a id="a5516b7058e34c99bb862df3bc1eecae3"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>FORMAT_STRING</b> = &quot;fmt&quot;</td></tr>
<tr class="separator:a5516b7058e34c99bb862df3bc1eecae3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa86c939365304cd4d9f652cf93cd7fe"><td class="memItemLeft" align="right" valign="top"><a id="afa86c939365304cd4d9f652cf93cd7fe"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>SHIFT_STRING</b> = &quot;shift&quot;</td></tr>
<tr class="separator:afa86c939365304cd4d9f652cf93cd7fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e78117f3764848172c07b296dfd1b82"><td class="memItemLeft" align="right" valign="top"><a id="a8e78117f3764848172c07b296dfd1b82"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>TRUNCATE_STRING</b> = &quot;truncate&quot;</td></tr>
<tr class="separator:a8e78117f3764848172c07b296dfd1b82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdb5c69552077512f7168af8407cb3f3"><td class="memItemLeft" align="right" valign="top"><a id="afdb5c69552077512f7168af8407cb3f3"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>VALID_STRING</b> = &quot;valid&quot;</td></tr>
<tr class="separator:afdb5c69552077512f7168af8407cb3f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9031eeb089f0eb16c7cd7c4ce4ee4a1"><td class="memItemLeft" align="right" valign="top"><a id="ab9031eeb089f0eb16c7cd7c4ce4ee4a1"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>LEAD_STRING</b> = &quot;lead&quot;</td></tr>
<tr class="separator:ab9031eeb089f0eb16c7cd7c4ce4ee4a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae315713f003196d9dcc5752b37b6f21a"><td class="memItemLeft" align="right" valign="top"><a id="ae315713f003196d9dcc5752b37b6f21a"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>INIT_STRING</b> = &quot;init&quot;</td></tr>
<tr class="separator:ae315713f003196d9dcc5752b37b6f21a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec9cec4184aeae226e6ea4d412cc1566"><td class="memItemLeft" align="right" valign="top"><a id="aec9cec4184aeae226e6ea4d412cc1566"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>DA_INIT_STRING</b> = &quot;da_init&quot;</td></tr>
<tr class="separator:aec9cec4184aeae226e6ea4d412cc1566"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a592bf27c3d751fcb383f9885fac7416f"><td class="memItemLeft" align="right" valign="top"><a id="a592bf27c3d751fcb383f9885fac7416f"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>OFFSET_STRING</b> = &quot;offset&quot;</td></tr>
<tr class="separator:a592bf27c3d751fcb383f9885fac7416f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa47fe39b26e1dfcf0a6591793ebcf361"><td class="memItemLeft" align="right" valign="top">dictionary&#160;</td><td class="memItemRight" valign="bottom"><b>LENGTH_DICT</b></td></tr>
<tr class="separator:aa47fe39b26e1dfcf0a6591793ebcf361"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5f677ddb45118a065341787347608d3"><td class="memItemLeft" align="right" valign="top"><a id="ae5f677ddb45118a065341787347608d3"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_ATTEMPTS</b> = 5</td></tr>
<tr class="separator:ae5f677ddb45118a065341787347608d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae41673294599268f3f42d7762e18f90c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae41673294599268f3f42d7762e18f90c">&#9670;&nbsp;</a></span>add_date_matches_to_output_dict()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def metplus.util.string_template_substitution.add_date_matches_to_output_dict </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>match_dict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>output_dict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>time_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>valid_shift</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Look for time values in match dictionary add combine the values to add to the output dictionary. </p>
<p>Apply shift value for valid time only. Args: </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">match_dict</td><td>dictionary containing matches found with keys named 'valid+Y','init+m', 'da_init+d', etc. and values are the number of years, months, hours, etc. </td></tr>
    <tr><td class="paramname">output_dict</td><td>time dictionary to set valid, init, or da_init </td></tr>
    <tr><td class="paramname">time_type</td><td>type of time item to process. Valid options are: VALID_STRING, INIT_STRING, or DA_INIT_STRING </td></tr>
    <tr><td class="paramname">valid_shift</td><td>amount of time (in seconds) to shift the valid time Not applicable for any time type besides valid </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="string__template__substitution_8py_source.html#l00758">758</a> of file <a class="el" href="string__template__substitution_8py_source.html">string_template_substitution.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="string__template__substitution_8py_source.html#l00728">metplus.util.string_template_substitution.populate_output_dict()</a>.</p>

</div>
</div>
<a id="a20a315b1c804b2c7fc57c6f60f3a619e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20a315b1c804b2c7fc57c6f60f3a619e">&#9670;&nbsp;</a></span>add_lead_matches_to_output_dict()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def metplus.util.string_template_substitution.add_lead_matches_to_output_dict </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>match_dict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>output_dict</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Look for forecast lead values in match dictionary add combine the values to add to the output dictionary Args: </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">match_dict</td><td>dictionary containing matches found with keys named 'lead+H','lead+M', or 'lead+S' and values are the number of hours, minutes, or seconds in the forecast lead </td></tr>
    <tr><td class="paramname">output_dict</td><td>time dictionary to set lead </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="string__template__substitution_8py_source.html#l00792">792</a> of file <a class="el" href="string__template__substitution_8py_source.html">string_template_substitution.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="string__template__substitution_8py_source.html#l00728">metplus.util.string_template_substitution.populate_output_dict()</a>.</p>

</div>
</div>
<a id="a1090b938934069306e30af35186dd7f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1090b938934069306e30af35186dd7f0">&#9670;&nbsp;</a></span>add_offset_matches_to_output_dict()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def metplus.util.string_template_substitution.add_offset_matches_to_output_dict </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>match_dict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>output_dict</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Look for offset value in match dictionary and add the value to the output dictionary Args: </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">match_dict</td><td>dictionary containing matches found with keys named 'offset+H' (only hours are supported for offset) and value is number of hours in the offset </td></tr>
    <tr><td class="paramname">output_dict</td><td>time dictionary to set offset_hours </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="string__template__substitution_8py_source.html#l00814">814</a> of file <a class="el" href="string__template__substitution_8py_source.html">string_template_substitution.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="string__template__substitution_8py_source.html#l00728">metplus.util.string_template_substitution.populate_output_dict()</a>.</p>

</div>
</div>
<a id="a6f744b36edb54fddcece168ce15dd6b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f744b36edb54fddcece168ce15dd6b3">&#9670;&nbsp;</a></span>add_to_dict()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def metplus.util.string_template_substitution.add_to_dict </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>match</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>match_dict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>new_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add extracted information to match dictionary Args: </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">match</td><td>key for match dictionary containing tag name and units i.e. 'init+H' or 'lead+S' </td></tr>
    <tr><td class="paramname">match_dict</td><td>dictionary of info extracted from filename </td></tr>
    <tr><td class="paramname">filepath</td><td>rest of filename string to be parsed </td></tr>
    <tr><td class="paramname">new_len</td><td>length of filepath to extract Returns: True if info was added to dictionary or it already exists and matched newly parsed info, False if info could not be extracted or if info differed from info already in match dictionary </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="string__template__substitution_8py_source.html#l00180">180</a> of file <a class="el" href="string__template__substitution_8py_source.html">string_template_substitution.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="string__template__substitution_8py_source.html#l00652">metplus.util.string_template_substitution.get_fmt_info()</a>.</p>

</div>
</div>
<a id="a78c0f21c3892faca71b2df2c04d2249d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78c0f21c3892faca71b2df2c04d2249d">&#9670;&nbsp;</a></span>check_post_text()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def metplus.util.string_template_substitution.check_post_text </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>post_text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if there is an text after all tags and if they match the template. </p>
<p>Strip off text from filepath. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filepath</td><td>path to check </td></tr>
    <tr><td class="paramname">post_text</td><td>text after all tags </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>file path with post text removed or None if text does not match template </dd></dl>

<p class="definition">Definition at line <a class="el" href="string__template__substitution_8py_source.html#l00574">574</a> of file <a class="el" href="string__template__substitution_8py_source.html">string_template_substitution.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="string__template__substitution_8py_source.html#l00461">metplus.util.string_template_substitution.populate_match_dict()</a>.</p>

</div>
</div>
<a id="a96e4fe20561296eda4db76441d55c107"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96e4fe20561296eda4db76441d55c107">&#9670;&nbsp;</a></span>check_pre_text()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def metplus.util.string_template_substitution.check_pre_text </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pre_text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if there is an text before all tags and if they match the template. </p>
<p>Strip off text from filepath. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filepath</td><td>path to check </td></tr>
    <tr><td class="paramname">pre_text</td><td>text before any tags </td></tr>
    <tr><td class="paramname">post_text</td><td>text after all tags </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>file path with pre text removed or None if text does not match template </dd></dl>

<p class="definition">Definition at line <a class="el" href="string__template__substitution_8py_source.html#l00542">542</a> of file <a class="el" href="string__template__substitution_8py_source.html">string_template_substitution.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="string__template__substitution_8py_source.html#l00461">metplus.util.string_template_substitution.populate_match_dict()</a>, and <a class="el" href="string__template__substitution_8py_source.html#l00494">metplus.util.string_template_substitution.process_match_tags()</a>.</p>

</div>
</div>
<a id="a45de5cb0b5e343ae8b55bdc72667d37f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45de5cb0b5e343ae8b55bdc72667d37f">&#9670;&nbsp;</a></span>do_string_sub()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def metplus.util.string_template_substitution.do_string_sub </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tmpl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>skip_missing_tags</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>recurse</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>attempt</em> = <code>MAX_ATTEMPTS</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kwargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Perform string substitution on a template. Replace filename template
    tags (found within curly braces) with values passed into the function
    as arguments. In some cases, the template keys can have parameters
    containing formatting information. datetime objects
    set as the value of an argument can be formatted using Python datetime
    strftime format syntax, i.e. {init?fmt=%Y%m%d}. Integers and
    relativedelta objects passed as the value of an argument can be
    formatted with %H, %M, %S, or %d (hour, minute, second, or day
    respectively). Integers are assumed to be seconds.

    @param tmpl template to substitute values into
    @param skip_missing_tags (Optional) argument to allow the function to
     not fail if a tag cannot be substituted. This is useful when a
     developer wants to substitute some of the tags in a template but
     leave others alone before substituting them later. This is also needed
     if the template contains curly braces that are part of a dictionary
     (i.e. in a MET config variable) that should not be substituted. If
     set to False (default) and a key to be substituted was not passed into
     the function call, a TypeError exception will be raised.
    @param recurse If True, try to substitute values recursively until max
     number of attempts have been made. If False, only try once. Default
     value is False.
    @param attempt Counter to prevent infinite recursion if a set of curly
     braces are expected to not be substituted. This argument shouldn't be
     defined in the call to this function.
    @param kwargs any additional arguments that are passed to the function.
     These will be used to replace values in the template. For example, if
     my_arg=my_value is passed to the function, any occurence of {my_arg}
     in the template will be substituted with 'my_value'.
    @returns template with tags substituted with values
</pre> 
<p class="definition">Definition at line <a class="el" href="string__template__substitution_8py_source.html#l00303">303</a> of file <a class="el" href="string__template__substitution_8py_source.html">string_template_substitution.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="string__template__substitution_8py_source.html#l00248">metplus.util.string_template_substitution.handle_format_delimiter()</a>.</p>

</div>
</div>
<a id="adc346064a278283a0ee42f2617ed51d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc346064a278283a0ee42f2617ed51d8">&#9670;&nbsp;</a></span>find_and_replace_tags_in_template()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def metplus.util.string_template_substitution.find_and_replace_tags_in_template </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>match_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tmpl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kwargs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>skip_missing_tags</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loop through tags from template and replace them with the correct time values. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">match_list</td><td>list of tags to process </td></tr>
    <tr><td class="paramname">template</td><td>filename template to substitute values into </td></tr>
    <tr><td class="paramname">kwargs</td><td>all </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="string__template__substitution_8py_source.html#l00368">368</a> of file <a class="el" href="string__template__substitution_8py_source.html">string_template_substitution.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="string__template__substitution_8py_source.html#l00303">metplus.util.string_template_substitution.do_string_sub()</a>.</p>

</div>
</div>
<a id="ac0ef3ba7de100a846a331c998abe843f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0ef3ba7de100a846a331c998abe843f">&#9670;&nbsp;</a></span>format_hms()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def metplus.util.string_template_substitution.format_hms </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>obj</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function for do_string_sub. </p>
<p>For time offset values, get hour, minute, and second values to format as necessary Args: </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fmt</td><td>format to substitute, i.e. %3H or %2M or S </td></tr>
    <tr><td class="paramname">obj</td><td>time value in seconds to format, i.e. 3600 Returns: Formatted time value </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="string__template__substitution_8py_source.html#l00113">113</a> of file <a class="el" href="string__template__substitution_8py_source.html">string_template_substitution.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="string__template__substitution_8py_source.html#l00248">metplus.util.string_template_substitution.handle_format_delimiter()</a>.</p>

</div>
</div>
<a id="a14e344b8582d02210d4b0785c3fb54db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14e344b8582d02210d4b0785c3fb54db">&#9670;&nbsp;</a></span>format_one_time_item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def metplus.util.string_template_substitution.format_one_time_item </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>item</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>time_str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>unit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function for do_string_sub. </p>
<p>Determine precision of time offset value and format Args: </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">item</td><td>format to substitute, i.e. 3M or H </td></tr>
    <tr><td class="paramname">time_str</td><td>time value that precision will be applied, i.e. 60 </td></tr>
    <tr><td class="paramname">unit</td><td>currently being processed, i.e. M or H or S Returns: Padded value or empty string if unit is not found in item </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="string__template__substitution_8py_source.html#l00083">83</a> of file <a class="el" href="string__template__substitution_8py_source.html">string_template_substitution.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="string__template__substitution_8py_source.html#l00113">metplus.util.string_template_substitution.format_hms()</a>.</p>

</div>
</div>
<a id="acd5fff14199a70b0025a04c7d0da73c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd5fff14199a70b0025a04c7d0da73c5">&#9670;&nbsp;</a></span>get_fmt_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def metplus.util.string_template_substitution.get_fmt_info </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>match_dict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>identifier</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function for parse_template. </p>
<p>Reads format information from tag and populates dictionary with extracted values. Args: </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fmt</td><td>formatting values from template tag, i.e. Ymd </td></tr>
    <tr><td class="paramname">filepath</td><td>rest of text from filename that can be parsed </td></tr>
    <tr><td class="paramname">match_dict</td><td>dictionary of extracted information. Key is made up of the identifier and the format tag, i.e. init_H or valid_M. Value is the extracted information, i.e. 19870201 </td></tr>
    <tr><td class="paramname">identifier</td><td>tag name, i.e. 'init' or 'lead' </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of characters processed from the filename if success, -1 if failed to parse all format items in template tag </dd></dl>

<p class="definition">Definition at line <a class="el" href="string__template__substitution_8py_source.html#l00652">652</a> of file <a class="el" href="string__template__substitution_8py_source.html">string_template_substitution.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="string__template__substitution_8py_source.html#l00597">metplus.util.string_template_substitution.get_format_and_shift()</a>.</p>

</div>
</div>
<a id="a550047d109ae90f315134d50cc9cca84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a550047d109ae90f315134d50cc9cca84">&#9670;&nbsp;</a></span>get_format_and_shift()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def metplus.util.string_template_substitution.get_format_and_shift </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tag_content</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>match_dict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>valid_shift</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>extra_text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extract format and shift information from tag. </p>
<p>Raises TypeError if shift keyword is applied to a tag other than valid or if 2 different shift values are found Args: </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tag_content</td><td>text inside a tag, i.e. valid?fmt=Ymd?shift=30 </td></tr>
    <tr><td class="paramname">filepath</td><td>rest of filepath to process, i.e. 20190201.ext </td></tr>
    <tr><td class="paramname">match_dict</td><td>dictionary to add time info </td></tr>
    <tr><td class="paramname">valid_shift</td><td>current numbers of seconds to shift valid time </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>tuple of the length of the formatted time info (i.e. 8 for Ymd) and valid shift value </dd></dl>

<p class="definition">Definition at line <a class="el" href="string__template__substitution_8py_source.html#l00597">597</a> of file <a class="el" href="string__template__substitution_8py_source.html">string_template_substitution.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="string__template__substitution_8py_source.html#l00494">metplus.util.string_template_substitution.process_match_tags()</a>.</p>

</div>
</div>
<a id="a33354321db9120f70bfc9e0e50ab524a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33354321db9120f70bfc9e0e50ab524a">&#9670;&nbsp;</a></span>get_seconds_from_template()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def metplus.util.string_template_substitution.get_seconds_from_template </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>split_string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>element_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kwargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get seconds value from tag that contains a shift or truncate item Args: </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split_string</td><td>list of key/value from string sub tag to evalute, i.e. shift=-1H </td></tr>
    <tr><td class="paramname">element_name</td><td>information to extract, i.e. shift or truncate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>integer number of seconds that correspond to the item, i.e. -3600 </dd></dl>

<p class="definition">Definition at line <a class="el" href="string__template__substitution_8py_source.html#l00207">207</a> of file <a class="el" href="string__template__substitution_8py_source.html">string_template_substitution.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="string__template__substitution_8py_source.html#l00368">metplus.util.string_template_substitution.find_and_replace_tags_in_template()</a>.</p>

</div>
</div>
<a id="a380f79d206a4d803a3420de0e09d4623"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a380f79d206a4d803a3420de0e09d4623">&#9670;&nbsp;</a></span>get_tags()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def metplus.util.string_template_substitution.get_tags </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>template</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse template and pull out all wildcard characters (* or ?) and all tags, i.e. </p>
<p>{init?fmt=H}. Used to pull out information from a template that contains wildcards and add that information when filled out another template Returns a list of wildcards and tag names found, i.e. [ '*', 'init', 'lead'] </p>

<p class="definition">Definition at line <a class="el" href="string__template__substitution_8py_source.html#l00060">60</a> of file <a class="el" href="string__template__substitution_8py_source.html">string_template_substitution.py</a>.</p>

</div>
</div>
<a id="a231bebe9a5e50516dd0c01b3b3b3bab4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a231bebe9a5e50516dd0c01b3b3b3bab4">&#9670;&nbsp;</a></span>handle_format_delimiter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def metplus.util.string_template_substitution.handle_format_delimiter </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>split_string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>shift_seconds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>truncate_seconds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kwargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check for formatting/length request by splitting on FORMATTING_VALUE_DELIMITER split_string[1] Args: </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split_string</td><td>holds the formatting/length information (e.g. "fmt=%Y%m%d", "len=3") </td></tr>
    <tr><td class="paramname">idx</td><td>index in split_string of the format item Returns: Formatted string </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="string__template__substitution_8py_source.html#l00248">248</a> of file <a class="el" href="string__template__substitution_8py_source.html">string_template_substitution.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="string__template__substitution_8py_source.html#l00368">metplus.util.string_template_substitution.find_and_replace_tags_in_template()</a>.</p>

</div>
</div>
<a id="ab64dbb4f3a90e98d3f6c812209e1b1a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab64dbb4f3a90e98d3f6c812209e1b1a9">&#9670;&nbsp;</a></span>multiple_replace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def metplus.util.string_template_substitution.multiple_replace </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>replace_dict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Helper function for do_string_sub. Replace in 'text' all occurrences of any key in the
given dictionary by its corresponding value.  Returns the new string. </pre> 
<p class="definition">Definition at line <a class="el" href="string__template__substitution_8py_source.html#l00050">50</a> of file <a class="el" href="string__template__substitution_8py_source.html">string_template_substitution.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="string__template__substitution_8py_source.html#l00368">metplus.util.string_template_substitution.find_and_replace_tags_in_template()</a>.</p>

</div>
</div>
<a id="ab633116159fb4e2930a75cdda1f36c0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab633116159fb4e2930a75cdda1f36c0e">&#9670;&nbsp;</a></span>parse_template()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def metplus.util.string_template_substitution.parse_template </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>template</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extract time information from path using the filename template Args: </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">template</td><td>filename template to use to extract time information </td></tr>
    <tr><td class="paramname">filepath</td><td>path to examine </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>time_info dictionary with time information if successful, None if not </dd></dl>

<p class="definition">Definition at line <a class="el" href="string__template__substitution_8py_source.html#l00434">434</a> of file <a class="el" href="string__template__substitution_8py_source.html">string_template_substitution.py</a>.</p>

</div>
</div>
<a id="aeba014d23aae7ba688e5a71f6f30e3b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeba014d23aae7ba688e5a71f6f30e3b6">&#9670;&nbsp;</a></span>populate_match_dict()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def metplus.util.string_template_substitution.populate_match_dict </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>template</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use template to extract time information from filepath, add each value to a dictionary. </p>
<p>Populates a dictionary with keys that contain tag name + time type, i.e. init+Y, valid+M, or lead+S, with string values containing the number extracted from the filepath. Also determines the shift amount for valid time if it was found, i.e. {valid?fmt=Ymd?shift=-30}. Valid shift will be 0 if no shift. Note: valid time values will not have the shift applied. Args: </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">template</td><td>filename template to use to find time information, i.e. file.{valid?fmt=Ymd}.ext </td></tr>
    <tr><td class="paramname">filepath</td><td>path to examine, i.e. file.20190201.ext </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>tuple of match dictionary and valid shift value if success, i.e. ({'init+Y': '2019'}, -30) Returns (None, None) if could not extract time info </dd></dl>

<p class="definition">Definition at line <a class="el" href="string__template__substitution_8py_source.html#l00461">461</a> of file <a class="el" href="string__template__substitution_8py_source.html">string_template_substitution.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="string__template__substitution_8py_source.html#l00434">metplus.util.string_template_substitution.parse_template()</a>.</p>

</div>
</div>
<a id="aa6e19849f8996439782251d9d2afb325"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6e19849f8996439782251d9d2afb325">&#9670;&nbsp;</a></span>populate_output_dict()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def metplus.util.string_template_substitution.populate_output_dict </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>match_dict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>valid_shift</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get all time values in match dictionary to add to the output dictionary Args: </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">match_dict</td><td>dictionary containing matches found with keys named </td></tr>
    <tr><td class="paramname">valid_shift</td><td>number of seconds to shift the valid time </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>output dictionary containing the extracted time information </dd></dl>

<p class="definition">Definition at line <a class="el" href="string__template__substitution_8py_source.html#l00728">728</a> of file <a class="el" href="string__template__substitution_8py_source.html">string_template_substitution.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="string__template__substitution_8py_source.html#l00434">metplus.util.string_template_substitution.parse_template()</a>.</p>

</div>
</div>
<a id="a34dee4ea44f62db339e723d799db92af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34dee4ea44f62db339e723d799db92af">&#9670;&nbsp;</a></span>process_match_tags()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def metplus.util.string_template_substitution.process_match_tags </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>all_tags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loop through tags and process each. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">all_tags</td><td>string containing all tags with non-tag text removed from beginning and end. </td></tr>
    <tr><td class="paramname">filepath</td><td>path to process </td></tr>
    <tr><td class="paramname">logger</td><td>optional logger to output error information </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>tuple containing dictionary with match information and valid shift value if applicable, or (None, None) could not parse information </dd></dl>

<p class="definition">Definition at line <a class="el" href="string__template__substitution_8py_source.html#l00494">494</a> of file <a class="el" href="string__template__substitution_8py_source.html">string_template_substitution.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="string__template__substitution_8py_source.html#l00461">metplus.util.string_template_substitution.populate_match_dict()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aa47fe39b26e1dfcf0a6591793ebcf361"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa47fe39b26e1dfcf0a6591793ebcf361">&#9670;&nbsp;</a></span>LENGTH_DICT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dictionary metplus.util.string_template_substitution.LENGTH_DICT</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;=  {<span class="stringliteral">&#39;Y&#39;</span>: 4,</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;               <span class="stringliteral">&#39;m&#39;</span>: 2,</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;               <span class="stringliteral">&#39;d&#39;</span>: 2,</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;               <span class="stringliteral">&#39;H&#39;</span>: 2,</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;               <span class="stringliteral">&#39;M&#39;</span>: 2,</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;               <span class="stringliteral">&#39;S&#39;</span>: 2,</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;               <span class="stringliteral">&#39;j&#39;</span>: 3,</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;               <span class="stringliteral">&#39;y&#39;</span>: 2,</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;               <span class="stringliteral">&#39;b&#39;</span>: 3,</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;               }</div></div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="string__template__substitution_8py_source.html#l00037">37</a> of file <a class="el" href="string__template__substitution_8py_source.html">string_template_substitution.py</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
