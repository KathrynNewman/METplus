

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2. Software Installation/Getting Started &mdash; METplus 3.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_override.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3. Python Wrappers" href="wrappers.html" />
    <link rel="prev" title="1. Overview" href="overview.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> METplus
          

          
            
            <img src="../_static/METplus_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">METplus Wrappers Guides</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">1. Overview</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2. Software Installation/Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">2.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#supported-architectures">2.2. Supported architectures</a></li>
<li class="toctree-l3"><a class="reference internal" href="#programming-scripting-languages">2.3. Programming/scripting languages</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pre-requisites">2.4. Pre-requisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="#getting-the-metplus-wrappers-source-code">2.5. Getting the METplus Wrappers source code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#get-the-source-code-via-your-web-browser">2.5.1. Get the source code via your Web Browser</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#metplus-wrappers-directory-structure">2.6. METplus Wrappers directory structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-up-your-environment">2.7. Set up your environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cshrc">2.7.1. .cshrc:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bashrc">2.7.2. .bashrc:</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#set-up-metplus-wrappers-configuration-files">2.8. Set up METplus Wrappers Configuration files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-metplus-wrappers">2.9. Running METplus Wrappers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="wrappers.html">3. Python Wrappers</a></li>
<li class="toctree-l2"><a class="reference internal" href="systemconfiguration.html">4. System Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="usecases.html">5. METplus Use Cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="references.html">6. References</a></li>
<li class="toctree-l2"><a class="reference internal" href="quicksearch.html">7. METplus Quick Search for Use Cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html">8. METplus Configuration Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Contributors_Guide/index.html">Contributor’s Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">METplus</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">User’s Guide</a> &raquo;</li>
        
      <li>2. Software Installation/Getting Started</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Users_Guide/installation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="software-installation-getting-started">
<span id="install"></span><h1>2. Software Installation/Getting Started<a class="headerlink" href="#software-installation-getting-started" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>2.1. Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This chapter describes how to download and set up METplus Wrappers.
METplus Wrappers has been developed and tested on the Debian Linux
operating system.</p>
</div>
<div class="section" id="supported-architectures">
<h2>2.2. Supported architectures<a class="headerlink" href="#supported-architectures" title="Permalink to this headline">¶</a></h2>
<p>METplus Wrappers was developed on Debian Linux and is supported on this
platform.</p>
</div>
<div class="section" id="programming-scripting-languages">
<h2>2.3. Programming/scripting languages<a class="headerlink" href="#programming-scripting-languages" title="Permalink to this headline">¶</a></h2>
<p>METplus Wrappers is written in Python 3.6.3. It is intended to be a tool
for the modeling community to use and adapt. As users make upgrades and
improvements to the tools, they are encouraged to offer those upgrades
to the broader community by offering feedback to the developers or
coordinating for a GitHub pull. For more information on contributing
code to METplus Wrappers, please contact
<a class="reference external" href="mailto:met_help&#37;&#52;&#48;ucar&#46;edu">met_help<span>&#64;</span>ucar<span>&#46;</span>edu</a>.</p>
</div>
<div class="section" id="pre-requisites">
<h2>2.4. Pre-requisites<a class="headerlink" href="#pre-requisites" title="Permalink to this headline">¶</a></h2>
<p>The following software is required to run METplus Wrappers:</p>
<ul class="simple">
<li><p>Python 3.6.3</p></li>
<li><p>R version 3.2.5  <a class="footnote-reference brackets" href="#id2" id="id1">1</a></p></li>
<li><p>nco (netCDF operators)</p></li>
<li><p>MET version 9.0 or above</p></li>
<li><p>Basic familiarity with MET</p></li>
<li><p>GitHub account (if you plan on contributing code to METplus Wrappers)</p></li>
</ul>
</div>
<div class="section" id="getting-the-metplus-wrappers-source-code">
<span id="getcode"></span><h2>2.5. Getting the METplus Wrappers source code<a class="headerlink" href="#getting-the-metplus-wrappers-source-code" title="Permalink to this headline">¶</a></h2>
<p>The METplus Wrappers source code is available for download from a public
GitHub repository. You can retrieve the source code through your web
browser or the command line.</p>
<div class="section" id="get-the-source-code-via-your-web-browser">
<h3>2.5.1. Get the source code via your Web Browser<a class="headerlink" href="#get-the-source-code-via-your-web-browser" title="Permalink to this headline">¶</a></h3>
<p>If you are a new METplus Wrappers user and would like to experiment with
the use cases, you will want to follow these instructions to retrieve
the source code, additional documentation and sample data that
accompanies the use cases:</p>
<ul class="simple">
<li><p>On your local host (or wherever you wish to install the METplus
Wrappers code) create a directory where you want the code to reside</p></li>
<li><p>Open the browser of your choice and navigate to
<a class="reference external" href="https://github.com/NCAR/METplus">https://github.com/NCAR/METplus</a>. You will see something like the
following:</p></li>
</ul>
<img alt="../_images/metplus_repo.png" src="../_images/metplus_repo.png" />
<ul class="simple">
<li><p>Click on the ‘releases’ link, highlighted by a red circle in the
diagram below:</p></li>
</ul>
<img alt="../_images/metplus_repo_release.png" src="../_images/metplus_repo_release.png" />
<ul class="simple">
<li><p>You will be redirected to another screen. The latest available
release appears at the top of the screen:</p></li>
</ul>
<img alt="../_images/metplus_repo_releases_page.png" src="../_images/metplus_repo_releases_page.png" />
<ul class="simple">
<li><p>Expand the Assets menu by clicking on the black triangle to the left of the ‘Assets’ text (below the description of the latest release)</p></li>
<li><p>Click on the ‘Source code’ link (either the <em>zip</em> or <em>tar.gz</em>) and
when prompted, save it to the directory you created.</p></li>
<li><p>Uncompress the source code (on Linux/Unix<em>: gunzip</em> for zip file or
<em>tar xvfz</em> for the tar.gz file)</p></li>
<li><p>Create a directory for the sample data directory for the use case you
are interested in running</p></li>
<li><p>Click on the sample data link for the use case you will run and when
prompted, save the file to the directory you created above. Sample
data are available for the following use case categories:</p>
<ul>
<li><dl class="simple">
<dt>Model Applications:</dt><dd><ul>
<li><p>Convection allowing models: <em>sample_data-convection_allowing_models-3.0.tgz</em></p></li>
<li><p>Medium Range: <em>sample_data-medium_range-3.0.tgz</em></p></li>
<li><p>Precipitation: <em>sample_data-precipitation-3.0.tgz</em></p></li>
<li><p>TC and Extra TC: <em>sample_data-tc_and_extra_tc-3.0.tgz</em></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>MET Tool Wrapper:</dt><dd><ul>
<li><p>For single MET tool/METplus wrapper use cases and MET tests: <em>sample_data-met_test-9.0.tgz</em></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="metplus-wrappers-directory-structure">
<h2>2.6. METplus Wrappers directory structure<a class="headerlink" href="#metplus-wrappers-directory-structure" title="Permalink to this headline">¶</a></h2>
<p>Once you have cloned the METplus Wrappers from the GitHub repository at
<a class="reference external" href="https://github.com/NCAR/METplus">https://github.com/NCAR/METplus</a> to a location on your host, change
directories to the METplus Wrappers directory. You should have the
following directory structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">METplus</span><span class="o">/</span>
  <span class="n">docs</span><span class="o">/</span>
  <span class="n">internal_tests</span><span class="o">/</span>
  <span class="n">parm</span><span class="o">/</span>
  <span class="n">sorc</span><span class="o">/</span>
  <span class="n">ush</span><span class="o">/</span>
  <span class="n">README</span><span class="o">.</span><span class="n">md</span>
</pre></div>
</div>
<p>The top-level METplus Wrappers directory consists of a README.md file
and several subdirectories.</p>
<p>The docs/ directory contains documentation for users and contributors (HTML) and Doxygen
files that are used to create the METplus wrapper API documentaton. The Doxygen
documentation can be created and viewed via web browser if the developer
has Doxygen installed on the host.  The Doxygen documentation is useful to contributors and is not
necessary for METplus end-users.</p>
<p>The internal_tests/ directory contains unit test scripts that are only
relevant to METplus Wrappers developers and contributors.</p>
<p>The parm/ directory contains all the configuration files for MET and
METplus Wrappers.</p>
<p>The sorc/ directory contains Doxygen executables to generate
documentation for developers.</p>
<p>The src/ directory contains the source code for each of the wrappers in
METplus Wrappers.</p>
<p>The ush/ directory contains the Python wrappers to the MET tools.</p>
</div>
<div class="section" id="set-up-your-environment">
<h2>2.7. Set up your environment<a class="headerlink" href="#set-up-your-environment" title="Permalink to this headline">¶</a></h2>
<p>Environment variables need to be set to allow the METplus Wrappers
application to be run from any directory and for locating the necessary
Python modules. There is an option to set the JLOGFILE environment
variable, which indicates where JLOGS will be saved. JLOGS provide
information pertinent to the configuration-file framework. If this
environment is unset, then output from the configuration framework will
be directed to stdout (your display).</p>
<p>Add the following information to your .cshrc (C shell) or .bashrc (Bash
shell):</p>
<div class="section" id="cshrc">
<h3>2.7.1. .cshrc:<a class="headerlink" href="#cshrc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Open your .cshrc file and do the following:</p></li>
<li><p>To your PATH, add: <em>&lt;full-path-to</em>-<em>METplus</em>&gt;/ush</p></li>
<li><p>Optional: add JLOGFILE variable and set to
<em>&lt;full-path-to-save-jlog-files&gt;</em></p></li>
<li><p>Close your .cshrc file and run <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">~/.cshrc</span></code></p></li>
<li><p>For example:</p></li>
</ul>
<div class="highlight-tcsh notranslate"><div class="highlight"><pre><span></span><span class="c"># Add METplus to $PATH</span>
<span class="nb">set </span><span class="nv">path</span> <span class="o">=</span> <span class="o">(</span>other_path_entries ~/METplus/ush<span class="o">)</span>

<span class="c"># Optional JLOGFILE</span>
<span class="nb">setenv </span>JLOGFILE ~/jlog_out
</pre></div>
</div>
</div>
<div class="section" id="bashrc">
<h3>2.7.2. .bashrc:<a class="headerlink" href="#bashrc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Open your .bashrc file and do the following:</p></li>
<li><p>To your PATH, add : <em>&lt;full-path-to-METplus</em>&gt;/ush</p></li>
<li><p>Optional: add a JLOGFILE environment variable and set it to the
directory where you want the logs to reside</p></li>
<li><p>Close your .bashrc file and run <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">~/.bashrc</span></code></p></li>
<li><p>For example:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add METplus to $PATH</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>~/METplus/ush:<span class="nv">$PATH</span>

<span class="c1"># Optional JLOGFILE</span>
<span class="nb">export</span> <span class="nv">JLOGFILE</span><span class="o">=</span>~/
</pre></div>
</div>
</div>
</div>
<div class="section" id="set-up-metplus-wrappers-configuration-files">
<h2>2.8. Set up METplus Wrappers Configuration files<a class="headerlink" href="#set-up-metplus-wrappers-configuration-files" title="Permalink to this headline">¶</a></h2>
<p>There are four METplus Wrappers configuration files that must be defined
prior to running METplus Wrappers. These configuration files reside in
the METplus_INSTALL_DIRECTORY/METplus/parm/metplus_config</p>
<p>The following configuration files are automatically loaded during a
METplus Wrappers run and do not need to be invoked on the command line.</p>
<ul class="simple">
<li><p>metplus_data.conf</p>
<ul>
<li><p>data-relevant settings:</p>
<ul>
<li><p>filename templates</p></li>
<li><p>regular expressions for input or output filenames</p></li>
<li><p>directories where input data are located</p></li>
</ul>
</li>
</ul>
</li>
<li><p>metplus_logging.conf</p>
<ul>
<li><p>set logging levels for METplus and MET output</p></li>
<li><p>turn on/off logging to stdout (screen) or log files</p></li>
</ul>
</li>
<li><p>metplus_runtime.conf</p>
<ul>
<li><p>runtime-related settings:</p>
<ul>
<li><p>location of METplus master_metplus.conf file (the ‘master’ conf
file that is a collection of all the final METplus
configuration files)</p></li>
</ul>
</li>
</ul>
</li>
<li><p>metplus_system.conf</p>
<ul>
<li><p>system-related settings:</p>
<ul>
<li><p>location of METplus source code</p></li>
<li><p>location of MET source and build</p></li>
<li><p>location of other non-MET executables/binaries</p></li>
<li><p>location of METplus parm directory</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>They must be fully defined by replacing all variables preset to
<em>&lt;/path/to&gt;</em> with valid path names, or have those variables defined in a
down-stream config file. If configuring METplus Wrappers in a common
location for multiple users, it is recommended that the these four
configuration files are fully defined. Individual users have the option
to make customizations by over-riding any of these values in their own
configuration files.</p>
</div>
<div class="section" id="running-metplus-wrappers">
<h2>2.9. Running METplus Wrappers<a class="headerlink" href="#running-metplus-wrappers" title="Permalink to this headline">¶</a></h2>
<p>Running METplus Wrappers involves invoking the Python script
master_metplus.py from any directory followed by a list of configuration
files (file path relative to the
<em>&lt;path_to_METplus_install_dir</em>&gt;/METplus/parm directory).</p>
<p><strong>Example 1: Using a “default” configuration:</strong>
Copy and paste the following into an empty text file and name it ‘my_user_config.conf’:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>// This is a comment, comments are defined with a // at the beginning of the line

// Setting the PROCESS_LIST to **Usage** indicates that we want usage information
[config]
PROCESS_LIST = Usage

// Set the MET_INSTALL_DIR to the location of the MET install
[dir]
MET_INSTALL_DIR = /usr/local/met-9.0

// Set these to any valid directory to override the &lt;/path/to&gt; placeholder set in the metplus_system.conf file
[dir]
TMP_DIR = /tmp
INPUT_BASE = /tmp/input
OUTPUT_BASE = /tmp/output
</pre></div>
</div>
<p>Run METplus via: <code class="docutils literal notranslate"><span class="pre">master_metplus.py</span> <span class="pre">-c</span> <span class="pre">./&lt;my_user_config.conf&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">master_metplus.py</span> <span class="pre">-c</span> <span class="pre">/&lt;username&gt;/&lt;my_user_config.conf&gt;</span></code> if you saved your default config in a directory other than where you are running master_metplus.py.</p>
<p>When the above command is run, a usage message appears indicating that other config files are required to perform useful tasks, as well as a list of currently supported wrappers:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>USAGE: This is a default process, please indicate more specific processes in the PROCESS_LIST variable in one or more of the following configuration files:

-parm/metplus_config/metplus_runtime.conf
-parm/metplus_use_cases/&lt;usecase_name&gt;/&lt;usecase_name.conf&gt;
-parm/metplus_use_cases/&lt;usecase_name&gt;/examples/&lt;example_name&gt;.conf

Currently available processes are:
- CyclonePlotter
- EnsembleStat
- ExtractTiles
- GempakToCF
- GridStat
- Mode
- MTD
- PB2NC
- PcpCombine
- PointStat
- RegridDataPlane
- SeriesByLead
- SeriesByInit
- TcPairs
- TcStat
- TCMPRPlotter
</pre></div>
</div>
<p><strong>Example 2: Using a use-case configuration:</strong></p>
<p>The command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>master_metplus.py -c use_cases/feature_relative/feature_relative.conf
</pre></div>
</div>
<p>will run METplus using the defaults set in the three config files found in parm/metplus_config. Any variables defined in these three config files can be over-ridden in the parm/use_cases/feature_relative/feature_relative.conf file. METplus will run using the values specified in the feature_relative.conf file.</p>
<p><strong>Example 3: Using example configuration to perform a specific evaluation (e.g. Model 1 vs. Obs 1, Model 1 vs. Obs 2, Model 2 vs. Obs 1, etc…):</strong></p>
<p>The command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>master_metplus.py -c use_cases/feature_relative/feature_relative.conf \
-c use_cases/feature_relative/examples/series_by_lead_all_fhrs.conf
</pre></div>
</div>
<p>will run METplus using the defaults set in the three config files in parm/metplus_config, where variables can be over-ridden by parm/use_cases/feature_relative/feature_relative.conf or in parm/use_cases/feature_relative/examples/series_by_lead_all_fhrs.conf. The order in which conf files are called is important. Variables that are defined in intermediate conf files will be over-ridden by the same variables set in the conf file following it, or the last conf file.</p>
<dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>R version 3.2.5 is required when the TCMPRPlotter wraps the
plot_tcmpr.R script. Please refer to Chapter 21 Plotting and Graphics
Support for more information about plot_tcmpr.R.</p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="wrappers.html" class="btn btn-neutral float-right" title="3. Python Wrappers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="overview.html" class="btn btn-neutral float-left" title="1. Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, NCAR

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>